<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Support - MentalSpace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chat-bg {
            background: linear-gradient(135deg, #F8F8FF 0%, #F5F5DC 50%, #E6E6FA 100%);
        }
        .message-bubble {
            max-width: 85%;
            word-wrap: break-word;
        }
        .user-message {
            background: linear-gradient(135deg, #8FBC8F, #E6E6FA);
            margin-left: auto;
        }
        .counselor-message {
            background: white;
            border: 1px solid #E5E7EB;
        }
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 1rem;
            margin-bottom: 0.5rem;
        }
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #9CA3AF;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        .online-indicator {
            width: 8px;
            height: 8px;
            background: #10B981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .quick-response {
            transition: all 0.2s ease;
        }
        .quick-response:hover {
            transform: scale(1.05);
        }
        .emergency-button {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            animation: emergencyPulse 2s infinite;
        }
        @keyframes emergencyPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }
    </style>
</head>
<body class="chat-bg min-h-screen">
    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-sm border-b border-gray-200 px-6 py-4 sticky top-0 z-40">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <button onclick="window.location.href='index.html'" class="p-2 rounded-full hover:bg-gray-100">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-blue-400 rounded-full flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="font-semibold text-gray-800 text-sm">Sarah Johnson</h1>
                        <div class="flex items-center space-x-1">
                            <div class="online-indicator"></div>
                            <span class="text-xs text-gray-500">Online</span>
                        </div>
                    </div>
                </div>
            </div>
            <button class="p-2 rounded-full hover:bg-gray-100">
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
                </svg>
            </button>
        </div>
    </header>

    <!-- Chat Messages -->
    <div class="px-6 py-4 pb-32">
        <div id="chatMessages" class="space-y-4">
            <!-- Welcome Message -->
            <div class="counselor-message message-bubble rounded-2xl px-4 py-3 shadow-sm">
                <p class="text-gray-800 text-sm">Hi Alex! I'm Sarah, and I'm here to support you. How are you feeling today?</p>
                <span class="text-xs text-gray-500 mt-1 block">2:30 PM</span>
            </div>

            <!-- User Message -->
            <div class="user-message message-bubble rounded-2xl px-4 py-3 shadow-sm text-white">
                <p class="text-sm">Hi Sarah, I've been feeling a bit overwhelmed with work lately.</p>
                <span class="text-xs text-white/80 mt-1 block">2:32 PM</span>
            </div>

            <!-- Counselor Response -->
            <div class="counselor-message message-bubble rounded-2xl px-4 py-3 shadow-sm">
                <p class="text-gray-800 text-sm">I understand that work stress can be really challenging. Can you tell me more about what's been overwhelming you?</p>
                <span class="text-xs text-gray-500 mt-1 block">2:33 PM</span>
            </div>

            <!-- Quick Response Suggestions -->
            <div class="bg-white/60 backdrop-blur-sm rounded-2xl p-4 shadow-sm">
                <p class="text-sm text-gray-600 mb-3">Quick responses:</p>
                <div class="flex flex-wrap gap-2">
                    <button class="quick-response bg-green-100 text-green-700 px-3 py-2 rounded-full text-xs font-medium" onclick="sendQuickResponse('Workload is too heavy')">
                        Workload is too heavy
                    </button>
                    <button class="quick-response bg-blue-100 text-blue-700 px-3 py-2 rounded-full text-xs font-medium" onclick="sendQuickResponse('Feeling anxious about deadlines')">
                        Feeling anxious about deadlines
                    </button>
                    <button class="quick-response bg-purple-100 text-purple-700 px-3 py-2 rounded-full text-xs font-medium" onclick="sendQuickResponse('Having trouble focusing')">
                        Having trouble focusing
                    </button>
                </div>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div id="typingIndicator" class="hidden">
            <div class="typing-indicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <span class="text-xs text-gray-500 ml-2">Sarah is typing...</span>
            </div>
        </div>
    </div>

    <!-- Input Area -->
    <div class="fixed bottom-20 left-0 right-0 bg-white/90 backdrop-blur-sm border-t border-gray-200 px-6 py-4">
        <div class="flex items-end space-x-3">
            <button class="p-2 rounded-full hover:bg-gray-100">
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path>
                </svg>
            </button>
            <div class="flex-1">
                <textarea 
                    id="messageInput" 
                    placeholder="Type your message..."
                    class="w-full p-3 rounded-2xl border border-gray-200 bg-white resize-none text-sm"
                    rows="1"
                ></textarea>
            </div>
            <button id="sendButton" class="p-3 rounded-full bg-gradient-to-r from-green-400 to-purple-400 text-white hover:opacity-90 transition-opacity">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Emergency Support Button -->
    <div class="fixed bottom-32 right-6 z-30">
        <button class="emergency-button w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
            </svg>
        </button>
    </div>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-6">
            <div class="bg-white rounded-2xl p-8 max-w-sm w-full text-center">
                <div class="w-16 h-16 bg-red-100 rounded-full mx-auto mb-4 flex items-center justify-center">
                    <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Emergency Support</h3>
                <p class="text-gray-600 mb-6">If you're in immediate danger or having thoughts of self-harm, please reach out for help immediately.</p>
                <div class="space-y-3">
                    <button onclick="callEmergency()" class="w-full bg-red-600 text-white py-3 rounded-lg font-medium">
                        Call Crisis Hotline
                    </button>
                    <button onclick="textEmergency()" class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium">
                        Text Crisis Line
                    </button>
                    <button onclick="closeEmergency()" class="w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-medium">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm border-t border-gray-200 px-6 py-3 z-50">
        <div class="flex justify-around items-center">
            <a href="index.html" class="flex flex-col items-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                <span class="text-xs font-medium">Home</span>
            </a>
            <a href="chat.html" class="flex flex-col items-center space-y-1 text-green-500">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
                <span class="text-xs font-medium">Chat</span>
            </a>
            <a href="programs.html" class="flex flex-col items-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <span class="text-xs font-medium">Programs</span>
            </a>
            <a href="settings.html" class="flex flex-col items-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                <span class="text-xs font-medium">Settings</span>
            </a>
        </div>
    </nav>

    <script>
        // Chat functionality
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const chatMessages = document.getElementById('chatMessages');
        const typingIndicator = document.getElementById('typingIndicator');

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Send message
        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                // Add user message
                addMessage(message, 'user');
                messageInput.value = '';
                messageInput.style.height = 'auto';
                
                // Show typing indicator
                showTypingIndicator();
                
                // Simulate counselor response
                setTimeout(() => {
                    hideTypingIndicator();
                    const responses = [
                        "I understand how that feels. Can you tell me more about what's been going on?",
                        "That sounds really challenging. What do you think might help in this situation?",
                        "I hear you. Let's work through this together. What specific part has been most difficult?",
                        "Thank you for sharing that with me. How long have you been feeling this way?",
                        "I appreciate your openness. What kind of support do you think would be most helpful right now?"
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(randomResponse, 'counselor');
                }, 2000);
            }
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            const now = new Date();
            const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            if (sender === 'user') {
                messageDiv.className = 'user-message message-bubble rounded-2xl px-4 py-3 shadow-sm text-white';
                messageDiv.innerHTML = `
                    <p class="text-sm">${text}</p>
                    <span class="text-xs text-white/80 mt-1 block">${timeString}</span>
                `;
            } else {
                messageDiv.className = 'counselor-message message-bubble rounded-2xl px-4 py-3 shadow-sm';
                messageDiv.innerHTML = `
                    <p class="text-gray-800 text-sm">${text}</p>
                    <span class="text-xs text-gray-500 mt-1 block">${timeString}</span>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendQuickResponse(text) {
            addMessage(text, 'user');
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate counselor response
            setTimeout(() => {
                hideTypingIndicator();
                const responses = {
                    'Workload is too heavy': 'I can see how a heavy workload would feel overwhelming. Have you been able to take any breaks or set boundaries around your work time?',
                    'Feeling anxious about deadlines': 'Deadline anxiety is very common and can be really stressful. What helps you feel most prepared when facing a deadline?',
                    'Having trouble focusing': 'Difficulty focusing can be frustrating. Have you noticed if there are specific times or situations when this happens more?'
                };
                const response = responses[text] || 'Thank you for sharing that. Let me help you work through this.';
                addMessage(response, 'counselor');
            }, 2000);
        }

        function showTypingIndicator() {
            typingIndicator.classList.remove('hidden');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            typingIndicator.classList.add('hidden');
        }

        // Event listeners
        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Emergency modal functions
        const emergencyModal = document.getElementById('emergencyModal');
        
        document.querySelector('.emergency-button').addEventListener('click', function() {
            emergencyModal.classList.remove('hidden');
        });

        function closeEmergency() {
            emergencyModal.classList.add('hidden');
        }

        function callEmergency() {
            alert('Connecting to Crisis Hotline: 988\n\nIf this were a real app, this would initiate a phone call to the National Suicide Prevention Lifeline.');
        }

        function textEmergency() {
            alert('Connecting to Crisis Text Line: Text HOME to 741741\n\nIf this were a real app, this would open your messaging app with the crisis text line number.');
        }

        // Close emergency modal when clicking outside
        emergencyModal.addEventListener('click', function(e) {
            if (e.target === emergencyModal) {
                closeEmergency();
            }
        });
    </script>
</body>
</html>